!function(t){angular.module("app",["weatherApp","clockApp","geolocation"])}(window),function(t){angular.module("clockApp",[])}(window),function(t){var n=angular.module("clockApp");n.directive("clock",["$interval","dateFilter",function(t,n){return{restricted:"E",scope:{format:"@?"},link:function(e,o){function r(){o.text(n(new Date,e.format))}void 0==e.format&&(e.format="h:mm a");var a;o.on("$destroy",function(){t.cancel(a)}),a=t(function(){r()},1e3),r()}}}])}(window),function(t){angular.module("geolocation",[])}(window),function(t){var n=angular.module("geolocation");n.factory("geolocationService",["$q","$http",function(t,n){var e=function(){var n=t.defer();return navigator.geolocation?navigator.geolocation.getCurrentPosition(function(t){n.resolve(t.coords)},function(t){n.reject(t)}):n.reject(!1),n.promise},o=function(e,o){var r="a7ca14d429ae359cdab7761182aab",a={url:"http://api.worldweatheronline.com/free/v2/tz.ashx",method:"jsonp",params:{q:e+","+o,format:"json",key:r,callback:"JSON_CALLBACK"}},i=t.defer();return n.jsonp(a.url,a).then(function(t){var n=t.data.data.time_zone[0].localtime;i.resolve(n)},function(t){console.dir(t),i.reject(t)}),i.promise};return{getLocation:e,getLocalTime:o}}])}(window),function(t){angular.module("weatherApp",["geolocation"])}(window),function(t){var n=angular.module("weatherApp");n.controller("WeatherCtrl",["weatherSrvc","geolocationService",function(t,n){function e(){n.getLocation().then(function(t){var n=t.latitude,e=t.longitude;r.searchByCoord(n,e)},function(t){r.searchByCity(a)})}function o(t,e){n.getLocalTime(t,e).then(function(t){r.time=t,console.log(r.time)},function(t){})}var r=this;r.time;var a="Chicago";r.searchByCity=function(n){t.getWeatherByCity(n).then(function(t){r.currentCity=t.city.name,r.currentWeather=t.main,r.currentTemp=t.temp,o(t.city.lat,t.city.lon)},function(t){console.dir(t)})},r.searchByCoord=function(n,e){t.getWeatherByCoord(n,e).then(function(t){r.currentCity=t.city.name,r.currentWeather=t.main,r.currentTemp=t.temp,o(n,e)},function(t){console.dir(t)})},e()}])}(window),function(t){var n=angular.module("weatherApp");n.filter("temperature",function(){return function(t){if(t){t=parseInt(t);var n=Math.round((t-32)*(5/9)),e=t+"°F / "+n+"°C";return e}return""}})}(window),function(t){var n=angular.module("weatherApp");n.factory("weatherSrvc",["$http","$q",function(t,n){function e(e){var o=n.defer(),r={};return t.jsonp(e.url,e).then(function(t){var n=t.data;n?(r.city={name:n.name,lat:n.coord.lat,lon:n.coord.lon},n.weather[0]&&(r.main=n.weather[0].main),n.main&&(r.temp=n.main.temp)):console.log("no data"),o.resolve(r)},function(t){console.dir(t),o.reject(t)}),o.promise}var o="http://api.openweathermap.org/data/2.5/weather",r="a0d7e44cdb26abb996246b544a26f161",a=function(t,n){var a={method:"jsonp",url:o,params:{lat:t,lon:n,units:"imperial",APPID:r,callback:"JSON_CALLBACK"}};return e(a)},i=function(t){var n={method:"jsonp",url:o,params:{q:t,units:"imperial",APPID:r,callback:"JSON_CALLBACK"}};return e(n)};return{getWeatherByCity:i,getWeatherByCoord:a}}])}(window);