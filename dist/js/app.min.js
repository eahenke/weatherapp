!function(n){angular.module("app",["weatherApp","clockApp","geolocation"])}(window),function(n){angular.module("clockApp",[])}(window),function(n){var t=angular.module("clockApp");t.directive("clock",["$interval","dateFilter",function(n,t){return{restricted:"E",scope:{format:"@?"},link:function(e,o){function r(){o.text(t(new Date,e.format))}void 0==e.format&&(e.format="h:mm a");var a;o.on("$destroy",function(){n.cancel(a)}),a=n(function(){r()},1e3),r()}}}])}(window),function(n){angular.module("geolocation",[])}(window),function(n){var t=angular.module("geolocation");t.factory("geolocationService",["$q",function(n){var t=function(){var t=n.defer();return navigator.geolocation?navigator.geolocation.getCurrentPosition(function(n){t.resolve(n.coords)},function(n){t.reject(n)}):t.reject(!1),t.promise};return{getLocation:t}}])}(window),function(n){angular.module("weatherApp",["geolocation"])}(window),function(n){var t=angular.module("weatherApp");t.controller("WeatherCtrl",["weatherSrvc","geolocationService",function(n,t){function e(){t.getLocation().then(function(n){o.searchByCoord(n)},function(n){o.searchByCity(r)})}var o=this,r="Chicago";o.searchByCity=function(t){n.getWeatherByCity(t).then(function(n){o.currentCity=n.city,o.currentWeather=n.main,o.currentTemp=n.temp},function(n){console.dir(n)})},o.searchByCoord=function(t){n.getWeatherByCoord(t).then(function(n){o.currentCity=n.city,o.currentWeather=n.main,o.currentTemp=n.temp},function(n){console.dir(n)})},e()}])}(window),function(n){var t=angular.module("weatherApp");t.filter("temperature",function(){return function(n){n=parseInt(n);var t=Math.round((n-32)*(5/9)),e=n+"°F / "+t+"°C";return e}})}(window),function(n){var t=angular.module("weatherApp");t.factory("weatherSrvc",["$http","$q",function(n,t){function e(e){var o=t.defer(),r={};return n.jsonp(e.url,e).then(function(n){var t=n.data;t?(r.city=t.name,t.weather[0]&&(r.main=t.weather[0].main),t.main&&(r.temp=t.main.temp)):console.log("no data"),o.resolve(r)},function(n){console.dir(n)}),o.promise}var o="http://api.openweathermap.org/data/2.5/weather",r="a0d7e44cdb26abb996246b544a26f161",a=function(n){var t={method:"jsonp",url:o,params:{lat:n.latitude,lon:n.longitude,units:"imperial",APPID:r,callback:"JSON_CALLBACK"}};return e(t)},i=function(n){var t={method:"jsonp",url:o,params:{q:n,units:"imperial",APPID:r,callback:"JSON_CALLBACK"}};return e(t)};return{getWeatherByCity:i,getWeatherByCoord:a}}])}(window);